from fastapi import FastAPI from .db import database app = FastAPI() @app.on_event("startup") async def startup(): await database.connect() @app.on_event("shutdown") async def shutdown(): await database.disconnect() @app.get("/") def read_root(): return {"message": "Welcome to Hill Country Land Intelligence API"} @app.get("/health") def health_check(): return {"status": "ok"} from sqlalchemy import create_engine, MetaData from databases import Database import os DATABASE_URL = os.getenv("DATABASE_URL") database = Database(DATABASE_URL) metadata = MetaData() engine = create_engine(DATABASE_URL) fastapi uvicorn sqlalchemy databases psycopg2-binary python-dotenv FROM python:3.11-slim WORKDIR /app COPY requirements.txt . RUN pip install -r requirements.txt COPY . . EXPOSE 10000 CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "10000"]
